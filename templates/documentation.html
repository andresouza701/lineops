{% extends "base.html" %}

{% block hero %}
<section class="hero">
  <div class="badge">Documentação</div>
  <p class="small-label">Endpoints e guias</p>
  <h1>Manual rápido das integrações</h1>
  <p>
    Combine os testes automatizados com chamadas reais para `/api/token/` e
    valide os comportamentos esperados antes de liberar para produção.
  </p>
</section>
{% endblock %}

{% block content %}
<section class="grid content-grid">
  <div class="card">
    <h2>Endpoints principais</h2>
    <ul>
      <li><code>POST /api/token/</code> – retorna `access` e `refresh` tokens.</li>
      <li><code>POST /api/token/refresh/</code> – atualiza o access token.</li>
      <li><code>GET /api/admin-only/</code> – protegido por `IsAdmin`.</li>
    </ul>
  </div>
  <div class="card">
    <h2>Fluxo de alocação</h2>
    <ol>
      <li>Crie um `Employee` (full_name, corporate_email, employee_id, department).</li>
      <li>Crie um `SIMcard` e vincule a um `PhoneLine`.</li>
      <li>Use `AllocationService.allocate_line` para conectar tudo.</li>
    </ol>
  </div>
  <div class="card">
    <h2>Alertas</h2>
    <p>
      O serviço dispara <code>BusinessLogicError</code> quando há mais de duas
      linhas ativas ou quando a linha já está ligada a outro funcionário.
    </p>
    <p>Proteja as remoções com `PROTECT` e respeite o histórico do modelo `LineAllocation`.</p>
  </div>
</section>
{% endblock %}
